/**
 * @author          Leo Keith <leo@fmclarity.com>
 * @copyright       2016 FM Clarity Pty Ltd.
 */
import './AddressSchema.jsx';
import './BillingAddressSchema.jsx';
import './ServiceDetailsSchema.jsx';
import './AreaDetailsSchema.jsx';
import { Documents, DocExplorer } from '/modules/models/Documents';
import { Text, TextArea, Select, Switch, Currency, DateTime, StartEndTimePicker} from '/modules/ui/MaterialInputs';
import { Users } from '/modules/models/Users';
import { ContactCard } from '/modules/mixins/Members';
import React from "react";
import moment from 'moment';

/**
 * @memberOf 		module:models/Facilities
 */
let initiallUnit = "m";
let item = null;
const FacilitySchema = {
	//$schema:              "http://json-schema.org/draft-04/schema#",
	//title:                "Facility",
	//description:          "A site maintained by a team",

	//properties:
	//{

	////////////////////////////////////////////////////
	// Basic info
	////////////////////////////////////////////////////
	_id: {
		label: "Auto generated document id",
		description: "Document id generated by Mongo",
		type: "string",
		input: Text,
		options: {
			readonly: true
		},
		defaultValue: () => {
			return Random.id();
		}
	},

	name: {
		label: "Name",
		description: "A short identifier for the building (ie 12 Smith St)",
		type: "string",
		input: Text,
		required: true,
		autoFocus: true,
	},

	address: {
		label: "Address",
		description: "The location of the site",
		type: "object",
		required: true,
		subschema: AddressSchema,
	},

	type: {
		label: "Property type",
		input: Select,
		type: "string",
		required: true,
		options: {
			items: [
				"Commercial",
				"Retail",
				"Residential",
				"Industrial"
			]
		}
	},

	description: {
		label: "Description",
		description: "A brief description of the site",
		type: "string",
		optional: true,
		input: TextArea,
	},

	size: {
		label: "Size",
		description: "The net lettable area in metres squared",
		type: "number",
		optional: true,
		input: Text,
		size: 6
	},

	operatingTimes: {
		label: "Operating times",
		description: "When this site is open",
		type: "string",
		optional: true,
		input: Text
	},

	////////////////////////////////////////////////////
	// Configuration
	////////////////////////////////////////////////////

	levels: {
		label: "Areas",
		description: "The primary areas or zones for this site",
		type: [ Object ],
		//defaultValue: () => {
		//return JSON.parse( JSON.stringify( Config.defaultLevels ) )
		//},
		//input 			levels editor
	},

	areas: {
		label: "Building areas",
		description: "The main bookable or maintainable secondary areas for this site",
		type: [ Object ],
		//defaultValue: () => {
		//return JSON.parse( JSON.stringify( Config.defaultAreas ) )
		//}
		//input 			areas editor
	},

	servicesRequired: {
		label: "Services Required",
		description: "The services required to maintain this site",
		type: [ Object ],
		//defaultValue: () => {
		//return JSON.parse( JSON.stringify( Config.services ) )
		//}
	},

	////////////////////////////////////////////////////
	// Relations
	////////////////////////////////////////////////////

	team: {
		label: "Team",
		description: "The team that maintains this site",
		input: Select,
		options: ( item ) => {

			return {
				items: Meteor.user().getTeams()
			}

		}
	},

	members: {
		label: "Members",
		description: "Stakeholders and staff for this site"
	},

	suppliers: {
		label: "Suppliers",
		description: "Contractors supplying services for this facility",
	},

    documents: {
        label: "Documents",
        description: "Saved facility documents",
        type: "array",
        /*relation:
        {
            type: ORM.HasMembers,
            source: "Files",
            key: "team._id"
        },*/
        input: DocExplorer
    },


	//}

	areaDetails: 	{
		label: "Area information",
		type: "object",
		subschema: AreaDetailsSchema,
	 },

	 data:{
		 label: "Area information",
		 type: "object",
		 subschema:  ServiceDetailsSchema,
	 },
	 
	 billingDetails : {
	 	label: "Billing Details",
	 	type: "object",
	 	subschema: BillingAddressSchema,
	 },
}

export default FacilitySchema;
